# 数据处理报告 (任务二)

## 1. 数据加载与合并
- 读取 `dataA.csv` 和 `dataB.csv`。
- 基于 '孕妇代码' 将两个数据集进行左合并。

## 2. 数据清洗与质量控制
- 移除了 'Y染色体浓度' 或 '检测孕周' 缺失的记录。
- 过滤了 '原始读段数' 低于1,000,000的记录。
- 筛选GC含量在 (0.3, 0.5) 范围内的记录。
- 过滤了 '被过滤掉读段数的比例' 大于 0.1 的记录。
- 筛选 '唯一比对的读段数' 大于 2,000,000 的记录。

## 2.5. Y染色体浓度端点修正 (Winsorization)
- 对Y染色体浓度值进行端点修正，避免极端值 (0或1) 对模型稳定性的影响。

## 3. 孕周格式转换与异常值处理
- **孕周格式转换**: 将字符串格式的孕周（例如 '11w+6'）统一转换为连续周数 `w + d/7` 的形式（例如 `11 + 6/7`），以便进行数值计算。
- **异常值处理**: 对孕妇BMI和转换后的孕周数使用IQR方法进行异常值检测和修正。

## 4. BMI分组 (基于四分位数)
- 根据每位孕妇首次检测时的BMI值，使用四分位数将其分为四个组 (Q1, Q2, Q3, Q4)。

## 5. '首次达标时间' 数据集构建
- **事件定义**: Y染色体浓度 >= 0.04。
- 对每个孕妇，按孕周排序所有检测记录。
- **事件时间 (T_i)**: 若存在达标记录，则取首次达标的孕周作为事件时间 (达标=1)。
- **删失时间 (C_i)**: 若不存在达标记录，则取最后一次检测的孕周作为删失时间 (达标=0)。

## 6. 输出
- 处理后的时间-事件数据集已保存到: `C:\Users\Admin\Desktop\CUMCM2025-C\CUMCM2025-C\scripts_T2_v1.1\processed_data\time_to_event_dataset_grouped.csv`
